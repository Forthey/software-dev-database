# Абстрактное описание
## Схемы
[Figma](https://www.figma.com/file/g0IRjguVJjrEBVWXO7t9YO/%D0%91%D0%94.-%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%9F%D0%9E?type=whiteboard&node-id=0-1&t=e2wgav5SLKfbsAj8-0)
## Функионал
### Приём на работу
В таблицу [работники](https://www.figma.com/file/g0IRjguVJjrEBVWXO7t9YO/%D0%91%D0%94.-%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%9F%D0%9E?type=whiteboard&node-id=1-136&t=e2wgav5SLKfbsAj8-0) внести информацию о новом сотруднике, затем добавить его в таблицу [разработчиков](https://www.figma.com/file/g0IRjguVJjrEBVWXO7t9YO/%D0%91%D0%94.-%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%9F%D0%9E?type=whiteboard&node-id=1-136&t=e2wgav5SLKfbsAj8-0)/[тестировщиков](https://www.figma.com/file/g0IRjguVJjrEBVWXO7t9YO/%D0%91%D0%94.-%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%9F%D0%9E?type=whiteboard&node-id=1-120&t=e2wgav5SLKfbsAj8-0)

### Перевод в новый проект
***Добавление в проект***\
1. В [m:n таблицу](https://www.figma.com/file/g0IRjguVJjrEBVWXO7t9YO/%D0%91%D0%94.-%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%9F%D0%9E?type=whiteboard&node-id=2-445&t=e2wgav5SLKfbsAj8-0) вносится пара id проекта id тестировщика/разработчика. Если число проектов, в которых работник учавствует, уже 2, то отказ в добавлении (проверка через JOIN с таблицей проектов where "дата окончания проекта" == null)
2. В таблицу переводов вносится информация о переводе с null в id предыдущего проекта
   
***Перевод в новый/существующий проект***\
1.  Из [m:n таблицы](https://www.figma.com/file/g0IRjguVJjrEBVWXO7t9YO/%D0%91%D0%94.-%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%9F%D0%9E?type=whiteboard&node-id=2-445&t=e2wgav5SLKfbsAj8-0) удалить пару id проекта, из которого работник переводится, и добавить пару id нового проекта
2. В таблицу переводов вносится информация о переводе

### Завершение проекта
В таблице [текущих разработок](https://www.figma.com/file/g0IRjguVJjrEBVWXO7t9YO/%D0%91%D0%94.-%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%9F%D0%9E?type=whiteboard&node-id=1-90&t=e2wgav5SLKfbsAj8-0) просто поставить дату завершения проекта вместо null - текущая дата

### Планирование и старт нового проекта
#### Q: планирование???
***Старт нового проекта***\
В таблицу [текущих разработок](https://www.figma.com/file/g0IRjguVJjrEBVWXO7t9YO/%D0%91%D0%94.-%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%9F%D0%9E?type=whiteboard&node-id=1-90&t=e2wgav5SLKfbsAj8-0) добавить информацию о проекте. "Стартовый" набор работников к проекту добавить через обычное добавление в новый проект

### Отслеживание текущего состояния проекта
Выводить изначально блоки планов\
Затем, при каком-нибудь взаимодействии, показывать более точную информацию о блоке (одну из 3х на выбор, либо весь список по дате):
- из таблицы [логи передачи планов](https://www.figma.com/file/g0IRjguVJjrEBVWXO7t9YO/%D0%91%D0%94.-%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%9F%D0%9E?type=whiteboard&node-id=1-307&t=e2wgav5SLKfbsAj8-0) информацию о "текучке" блока, отсортированную по дате
- из таблицы [тестирование](https://www.figma.com/file/g0IRjguVJjrEBVWXO7t9YO/%D0%91%D0%94.-%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%9F%D0%9E?type=whiteboard&node-id=1-345&t=e2wgav5SLKfbsAj8-0) информацию о проведённых тестированиях по дате
- из таблицы [баги](https://www.figma.com/file/g0IRjguVJjrEBVWXO7t9YO/%D0%91%D0%94.-%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%9F%D0%9E?type=whiteboard&node-id=1-411&t=e2wgav5SLKfbsAj8-0) информацию об обнаруженных багах по дате

Вывод всех просрочек по проекту (из всех 3х таблиц с дедлайном выбрать поля, для которых время сдачи > делайн)

### Увольнение разработчика или тестера за N просрочек <u>По его вине</u>
Проблема во фразе *по его вине*, так как из-за просрочки страдают все связанные дедлайны. Думаю, надо будет обсудить с преподавателем.\
\
Пока вот мысли, как сделать и не хранить бесполезные столбцы:\
Информация о просрочках будет менятся при сдаче кем-то своей части:
- Дедлайн сдачи блока просрочен = +просрочка разработчику, больше ничего не меняется в целом
- Просрочено тестирование = +просрочка к тестировщику, при этом дедлайн блока, к которому тестирование привязано,  
увеличивается на время просрочки тестировки
- Просрочено исправление бага = +0.5 просрочки к разработчику. Не полный балл потому, что разработчик привязан к блоку также, и дедлайн от просрочки бага не растянется (и ему с этим возиться придётся самому в любом случае). Можно альтернативу: +просрочка и сдвиг дедлайна в блоке

Увольнение по числу просрочек проихсодит в 9:00 каждый день (либо по нажатие кнопки у администратора, посмотрим). Для этого работник удаляется из бд, инфомрация о нём записывается втаблицу увольнений и также на его почту отправляется информация об увольнении

В целом получается, что у тестировщика гибкие дедлайны и его нельзя "подставить", а вот тестировщик разработчика может подставлять постоянно. Кстати, из этого вытекает другой способ: вообще не двигать дедлайны, просрочки тестировок и багов засчитывать по 0.5. Затем, при просрочке блока, смотреть на "ситуацию": если просрочка только по вине разработчика, то ему +1, если же виноват и тестировщик, то +0.5 обоим. Думаю, в таком случае нужно рассмотреть возможность подать разработчику ручную аппеляцию, если он уверен, что вся вина на тестере: в такой ситуации тестеру еще +0.5, а разработчик снимает с себя свои 0.5

#### MTBD: таблица просрочек. Тогда можно будет штраф за просрочку привязать не ко времени сдачи, да и в целом систему просрочек сделать поинтересней: в зависимости от "серьезности"


## Отчёты
### Список текущих разработок компании с указанием занятых в проекте
Выбирается вся информация из таблицы текущих разработок и отображается.\
Скорее всего также будут отображаться 2 выпадающих меню, при нажатии на которые будут подгружаться все участники конкретной разработки (для нужной разработки через m:n таблицы находим разработчиков и тестеров)

### Список персонала, с указанием истории каждого (в каких проектах участвовал, упоряд. по времени старта проектов)
Персонал разделяем на тестеров/разработчиков, отображая в алфавитном порядке по уровень -> фамилия -> имя. У каждого будет "кнопка" "показать список проектов", при нажатии на которую будет подгружаться через m:n таблицу список проектов (возможно отсортированный допольнительно к дате по статусу)

### Качество разработки – диаграмма по завершенным проектам со следующим показателем – (общее количество багов)/(продолжительность проекта в человеко-днях)
#### ??? -- как выглядит диаграмма не очень понятно
Конкретно про показатель:
1. Для проекта выбираем все блоки из таблицы блоков, затем для каждого блока считаем число багов, сумма всего - общее число багов.
2. В зависимости от того, что такое человеко-дни:
   1. Просто делим общее число багов на разность даты создания проекта с текущей, переведённой в дни
   2. Или умножаем это число на число участников проекта
   3. Или вообще ужас - добавляем каждому человеку дату вступления в проект (в m:n таблице, скорее всего) и тогда для подсчёта человека-дней мы должны пройтись по всем участникам через m:n таблицу и просуммировать человеко-дни от их даты вступления в проект.

# END 